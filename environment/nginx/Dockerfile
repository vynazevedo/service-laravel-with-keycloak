FROM --platform=linux/amd64 nginx:alpine

ARG NGINX_LISTEN_PORT=80
ARG NGINX_SERVER_NAME=_
ARG FASTCGI_PASS_HOST=php
ARG FASTCGI_PASS_PORT=9000

ENV NGINX_LISTEN_PORT=$NGINX_LISTEN_PORT \
    NGINX_SERVER_NAME=$NGINX_SERVER_NAME \
    FASTCGI_PASS_HOST=$FASTCGI_PASS_HOST \
    FASTCGI_PASS_PORT=$FASTCGI_PASS_PORT

COPY environment/nginx/templates/*.template /etc/nginx/templates/
